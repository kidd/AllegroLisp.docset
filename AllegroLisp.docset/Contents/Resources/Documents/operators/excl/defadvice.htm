<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>defadvice</title><link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Macro</b></td><td align="left" bgcolor="#00FFFF"><b>Package: excl</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.0</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 9.0 to 10.0.</a></small><br><a href="http://www.franz.com/support/documentation/9.0/doc/operators/excl/defadvice.htm">9.0 version</a></td></tr></table><h2 id="2">defadvice</h2>

<p id="3"><b>Arguments: </b><i>fspec where </i> &amp;rest <i>forms</i></p>

<p id="4">
Starting in Allegro CL release 6.0, the new fwrapper facility,
described in <a href="../../fwrappers-and-advice.htm">fwrappers-and-advice.htm</a>, replaces the
advice facility, and continued use of the advice facility is
deprecated.
</p>

<p id="5">This macro allows advice to be defined in a format similar to a
function definition (with defun). </p>

<p id="6"><i>fspec</i> must name a function. It is typically a
symbol but can be any function name, as in 
<a href="advise.htm"><b>advise</b></a>.
<i>fspec</i>
is not evaluated. </p>

<p id="7"><i>where</i> is either a symbol or a list. If it is a
symbol, it can either be the name of the advice or the class. If
<i>where</i> is one of <code>:before</code>,
<code>:around</code>, or <code>:after</code>, it is interpreted as the
class. Any other symbol is interpreted as a name. When
<i>where</i> is a symbol, the position of the advice
defaults to <code>nil</code>.  When
<i>where</i> defines the name, the class of the advice
defaults to <code>:after</code>.  When <i>where</i> is
the class, the name of the advice defaults to <code>nil</code>. </p>

<p id="8">If <i>where</i> is a list, the first element (if
there is one) is interpreted as the name, the second element as the
class, and the third element, if there is one, as the position. If
there is no second element, or the second element is <code>nil</code>, the class will be <code>:after</code>. Please
refer to the definition of 
<a href="advise.htm"><b>advise</b></a> for
information on the interpretation and behavior of the class, name and
position of advice. </p>

<p id="9">
<i>forms</i> are Lisp forms which will be evaluated
as if in a <b>progn</b>. <b>Warning</b>:
<i>forms</i> cannot be the single form <code>nil</code>. If you want the single form <code>nil</code> (in, for example, :around advice to not call the
function and return <code>nil</code>), specify
<code>(progn nil)</code> instead.
</p>

<p id="10">
See also <a href="../../fwrappers-and-advice.htm">fwrappers-and-advice.htm</a> for general
information on the new fwrapper facility and the older, now
deprecated, advice facility in Allegro CL.
</p>

<hr><p id="11"><small>Copyright (c) 1998-2016, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br>
<small>This page was not revised from the 9.0 page.</small><br><small>Created 2015.5.21.</small><br>
</p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.0</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 9.0 to 10.0.</a></small><br><a href="http://www.franz.com/support/documentation/9.0/doc/operators/excl/defadvice.htm">9.0 version</a></td></tr></table></body></html>