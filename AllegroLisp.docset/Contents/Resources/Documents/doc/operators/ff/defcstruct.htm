<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>defcstruct</title><link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Macro</b></td><td align="left" bgcolor="#00FFFF"><b>Package: ff</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.0</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 9.0 to 10.0.</a></small><br><a href="http://www.franz.com/support/documentation/9.0/doc/operators/ff/defcstruct.htm">9.0 version</a></td></tr></table><h2 id="2">defcstruct</h2>

<p id="3"><b>Arguments: </b><i>
</i> &amp;rest <i> body</i><i>
</i></p>

<p id="4">This macro is obsolete and kept for backward compatibility only. Please use <a href="def-foreign-type.htm"><b>def-foreign-type</b></a>.</p>

<p id="5">This macro defines a C structure to Lisp by defining appropriate accessor and creator
functions. The creator function is named <strong>make<em>-name</em></strong>. The accessor
function names for each slot are the hyphen-separated concatenation of the cstruct name
and the slot name. </p>

<p id="6">Argument <i>name</i> is either the name of this cstruct or a list. In the latter case
the first element of the list is the name of the cstruct and the second element may be the
keyword <code>:malloc</code>. </p>

<p id="7">Each slot is a list. The first item on the list is a symbol naming the slot, and the
rest of the list specifies the datatype. A datatype takes one of the following forms: </p>

<ul>
  <li id="8">A single keyword, which is one of the following: </li>
</ul>

<pre id="9">
:char
:byte
:short
:long
:unsigned-byte
:unsigned-short
:unsigned-long
:short-float
:long-float
</pre>

<blockquote>
  <p id="10">This will provide space for the specified atomic C data type to be placed in that slot.</p>
</blockquote>

<ul>
  <li id="11">A symbol, which must name a previously defined cstruct. </li>
  <li id="12">*datatype where datatype is any valid datatype. As in C, the * indicates that the slot
    will contain a C pointer (an integer address) to an object of the specified type. Also, as
    in C, if datatype is a symbol, the requirement that a structure of that name already be
    defined is relaxed. Pointer slots should normally not contain addresses in Lisp space
    since Lisp objects may move during garbage collection. They are most useful for C
    structures created using the :malloc option. </li>
  <li id="13">integer [integer...] datatype again, datatype is any valid (possibly compound) datatype,
    which may include the pointer *. The integers denote an array of the indicated dimensions.
    The accessor function(s) will accept appropriate subscript argument(s). The subscript
    arguments follow the C structure argument. </li>
  <li id="14">slot [slot ...] cstructs may include other cstructs. Here slot
    is recursively defined as another list. This is similar to 
    including another cstruct by
    name. </li>
</ul>

<p id="15">
See <a href="../../ftype.htm">ftype.htm</a> for
information on foreign types in Allegro CL and
<a href="../../foreign-functions.htm">foreign-functions.htm</a> for general
information on foreign functions in Allegro CL.
</p>

<hr><p id="16"><small>Copyright (c) 1998-2016, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br>
<small>This page was not revised from the 9.0 page.</small><br><small>Created 2015.5.21.</small><br>
</p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.0</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 9.0 to 10.0.</a></small><br><a href="http://www.franz.com/support/documentation/9.0/doc/operators/ff/defcstruct.htm">9.0 version</a></td></tr></table></body></html>