<html><head><meta name="viewport" content="width=device-width, initial-scale=1"> <meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"><title>locale-format-time</title></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: excl</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.1</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 10.0 to 10.1.</a></small><br><a href="http://www.franz.com/support/documentation/10.0/doc/operators/excl/locale-format-time.htm">10.0 version</a></td></tr></table><h2 id="2">locale-format-time</h2>

<p id="3"><b>Arguments: </b><i>
stream date-time show-date show-time
</i> &amp;optional  (<i>locale</i> *locale*)<i>fmt</i><i>
</i></p>

<p id="4">
Arguments:
</p>
<ul>
<li id="5">
<b><i>stream</i></b> is a stream.
</li>
<li id="6">
<b><i>date-time</i></b> is a universal-time (see <a href="../../../ansicl/dictentr/get-univ.htm"><b>get-universal-time</b></a>) or a date-time
object (see <a href="../../classes/date-time/date-time.htm"><code>date-time</code></a>).
</li>
<li id="7">
<b><i>show-date</i></b> is a boolean.
</li>
<li id="8">
<b><i>show-time</i></b> is a boolean.
</li>
<li id="9">
<b><i>locale</i></b> is a locale.
</li>
<li id="10">
<b><i>fmt</i></b> is a keyword, string, or a list.
</li>
</ul>
<p id="11">
This function outputs to the stream a locale appropriate
representation of the time specified by
<i>date-time</i>.  The output format can be specified as
a string following the XPG4 <b>strftime()</b> format (see below). If
<i>fmt</i> is non-<code>nil</code>, then the
date and time booleans are ignored.  Otherwise, if
<i>fmt</i> is <code>nil</code>, then the
date and time booleans determine the format based on the following
table:
</p>
<table BORDER="1" CELLSPACING="1" CELLPADDING="7" WIDTH="95%">
  <tr>
    <td WIDTH="25%" VALIGN="TOP"><i>show-date</i></td> 
    <td WIDTH="25%" VALIGN="TOP"><i>show-time</i></td>
    <td WIDTH="50%" VALIGN="TOP"><strong>fmt control</strong></td>
  </tr>
  <tr>
    <td WIDTH="25%" VALIGN="TOP">false</td> 
    <td WIDTH="25%" VALIGN="TOP">false</td> 
    <td WIDTH="50%" VALIGN="TOP">(<a href="locale-t-fmt-ampm.htm"><b>locale-t-fmt-ampm</b></a>
    locale)</td>
  </tr>
  <tr>
    <td WIDTH="25%" VALIGN="TOP">false</td> 
    <td WIDTH="25%" VALIGN="TOP">true</td> 
    <td WIDTH="50%" VALIGN="TOP">(<a href="locale-t-fmt.htm"><b>locale-t-fmt</b></a>
    locale)</td>
  </tr>
  <tr>
    <td WIDTH="25%" VALIGN="TOP">true</td> 
    <td WIDTH="25%" VALIGN="TOP">false</td> 
    <td WIDTH="50%" VALIGN="TOP">(<a href="locale-d-fmt.htm"><b>locale-d-fmt</b></a>
    locale)</td>
  </tr>
  <tr>
    <td WIDTH="25%" VALIGN="TOP">true</td> 
    <td WIDTH="25%" VALIGN="TOP">true</td> 
    <td WIDTH="50%" VALIGN="TOP">(<a href="locale-d-t-fmt.htm"><b>locale-d-t-fmt</b></a>
    locale)</td>
  </tr>
</table>

<p id="12">
The function <a href="locale-format-time.htm"><b>locale-format-time</b></a> can be invoked using the
format ~/ directive. The <i>locale</i> argument can be
supplied using format's ~v prefix argument. The
<i>fmt</i> argument can be supplied as the second prefix
argument. The <i>show-date</i> argument is specified
using the colon modifier.  The <i>show-time</i> argument
is specified using the at-sign modifier.
</p>
<p id="13">
The LC_TIME category defines display formats using conversion
specifications which are also defined in the category. The conversion
specifications consist of a '%' followed by one or two letters.  The
formats are intended for the XPG4 strftime() function.
</p>
<p id="14">
The <a href="locale-format-time.htm"><b>locale-format-time</b></a>
function outputs the date/time as specified by the format string in
the same way as <b>strftime()</b>.  In addition to the field
descriptor definitions, the <a href="locale-format-time.htm"><b>locale-format-time</b></a> function will interpret the
following C escape sequences as follows:
</p>
<pre id="15">
 \\	insert #\\
 \a	insert #\bell
 \b	insert #\backspace
 \f	insert #\page
 \n	insert #\linefeed
 \r	insert #\return
 \t	insert #\tab
 \v	insert #\vt
</pre>
<p id="16">
These are the field descriptor definitions:
</p>
<pre id="17">
  %%      same as %
  %a      locale's abbreviated weekday name
  %A      locale's full weekday name
  %b      locale's abbreviated month name (equivalent to %h)
  %B      locale's full month name
  %c      locale's appropriate date and time representation
  %C      century number (the year divided by  100  and  truncated  
          to  an  integer  as a decimal number [1,99]);
          single digits are preceded by 0
  %d      day of month [1,31]; single digits are preceded by 0
  %D      date as %m/%d/%y
  %e      day of month [1,31]; single digits are preceded by a
          space
  %F      equivalent to %Y-%m-%d
  %G      The ISO 8601 year with century as a decimal number.  
          The 4-digit year corresponding to the ISO week number 
          (see %V).  This has the same format and value as %y, 
          except that if the ISO week number belongs to the 
          previous or next year, that year is used instead.
  %g      Like %G, but without century, i.e., with a 2-digit year (00-99)  
  %h      locale's abbreviated month name (equivalent to %b)
  %H      hour (24-hour clock) [0,23]; single digits are preceded 
          by 0
  %I      hour (12-hour clock) [1,12]; single digits are preceded
          by 0
  %j      day number of year [001,366];
  %k      hour (24-hour clock) [0,23]; single digits are  
          preceded by a blank
  %l      hour (12-hour clock) [1,12]; single digits are  
          preceded by a blank
  %m      month number [1,12]; single digits are preceded by 0
  %M      minute [00,59]; single digits are preceded by 0
  %n      insert a newline
  %p      locale's equivalent of either a.m. or p.m 
          (case unspecified).
  %P      like %p but case specified to be lowercase
  %r      appropriate time  representation  in  12-hour  clock
          format with %p
  %R      time as %H:%M
  %S      seconds [00,61]
  %t      insert a tab
  %T      time as %H:%M:%S
  %u      weekday as a decimal number [1,7], with 1 representing 
          Monday
  %V      week number of the year as a decimal number [01,53],
          with  Monday  as  the first day of the week.  If the
          week containing 1 January has four or more  days  in
          the  new  year, then it is considered week 1; 
          otherwise, it is week 53 of the previous  year,  and  
          the next week is week 1.
  %w      weekday as a decimal number [0,6], with 0 
          representing Sunday. See also %u.
  %x      locale's appropriate date representation
  %X      locale's appropriate time representation
  %y      year within century [00,99]
  %Y      year, including the century (for example 1993)
  %Z      time zone name or abbreviation, or no  bytes  if  no
          time zone information exists
</pre>

<h3 id="18">
Modified Conversion Specifications
</h3>
<p id="19">
Some conversion specifications can be modified by the E and O
modifiers to indicate that an alternate format or specification should
be used rather than the one normally used by the unmodified conversion
specification.  If the alternate format or specification does not
exist in the current locale, the behavior will be as if the unmodified
specification were used.
</p>
<pre id="20">
  %Ec     locale's  alternate  appropriate   date   and   time
	  representation
  %EC     name of the  base  year  (period)  in  the  locale's
	  alternate representation
  %Ex     locale's alternate date representation
  %EX     locale's alternate time representation
  %Ey     offset from %EC (year only) in the  locale's  
          alternate representation
  %EY     full alternate year representation
  %Od     day  of  the  month  using  the  locale's  alternate
	  numeric symbols
  %Oe     same as %Od
  %OH     hour (24-hour clock) using  the  locale's  alternate
	  numeric symbols
  %OI     hour (12-hour clock) using  the  locale's  alternate
	  numeric symbols
  %Om     month using the locale's alternate numeric symbols
  %OM     minutes using the locale's alternate numeric symbols
  %OS     seconds using the locale's alternate numeric symbols
  %Ow     number of the weekday (Sunday=0) using the  locale's
	  alternate numeric symbols
  %Oy     year (offset from  %C)  in  the  locale's  alternate
	  representation  and  using  the  locale's  alternate
	  numeric symbols
</pre>
<h4 id="21">
The fmt argument
</h4>
<p id="22">
The <i>fmt</i> argument can be a string, as specified
above; the symbol <code>:secondf</code>,
<code>:minutef</code>, or <code>:hourf</code>; a list
where each element is either a string or one of the keywords just
specified, or a list where the first element of the inner list is
either <code>:secondf</code>, <code>:minutef</code>, or
<code>:hourf</code> and the second element is an integer
specifying the number of fractional digits to be displayed, or a list
where the first element is <code>:expanded</code>, the second
element is an integer specifying the number of year digits to be
displayed (along with a preceeding #\+ or #\- sign), followed by a
<i>fmt</i> that displays a year (such as "%G").
</p>
<h3 id="23">
Example: 
</h3>
<pre id="24">
;;  [assuming *locale* is (find-locale "en_US")]

(format t "~/locale-format-time/" 3192624000)
  prints `08:00:00 AM '

(format t "~:/locale-format-time/" 3192624000)
  prints `Saturday, March 03, 2001'

(format t "~@/locale-format-time/" 3192624000)
  prints `08:00:00  '

(format t "~:@/locale-format-time/" 3192624000)
  prints `Saturday, March 03, 2001 08:00:00 AM '

(format t "~v:@/locale-format-time/" :fr_FR 3192624000)
  prints `samedi 03 mars 2001 08 h 00 '

(format t "~v,v:@/locale-format-time/" :fr_FR "%A" 3192624000)
  prints `samedi'

(format t "~,v:@/locale-format-time/" "%A" 3192624000)
  prints `Saturday'

;;  The following examples use date-time representations:

(format t "~,v/locale-format-time/" 
        '(:expanded 3 "%G") (date-time "19850412"))
  prints `+0001985'

;;  The date-time which is the value of D is used in the 
;;  examples below.
(setq d (date-time "19850412T23:20:50,46"))
 
(format t "~,v/locale-format-time/" '((:secondf 1)) d)
  prints `5'  ;; rounds up to fit the number of digits specified
 
(format t "~,v/locale-format-time/" '((:secondf 2)) d)
  prints `46'
 
(format t "~,v/locale-format-time/" '((:secondf 3)) d)
  prints `460'

(format t "~,v/locale-format-time/" '("%H," (:hourf 3)) d)
  prints `23,345'
</pre>



<p id="25">
See <a href="../../iacl.htm#localization-1">Localization support
in Allegro CL</a> in <a href="../../iacl.htm">iacl.htm</a>.
</p>

<hr><p id="26"><small>Copyright (c) 1998-2017, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br>
<small>This page was not revised from the 10.0 page.</small><br><small>Created 2017.2.15.</small><br>
</p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.1</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 10.0 to 10.1.</a></small><br><a href="http://www.franz.com/support/documentation/10.0/doc/operators/excl/locale-format-time.htm">10.0 version</a></td></tr></table></body></html>