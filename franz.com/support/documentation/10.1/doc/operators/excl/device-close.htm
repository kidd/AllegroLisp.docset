<html><head><meta name="viewport" content="width=device-width, initial-scale=1"> <meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"><title>device-close</title></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Generic Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: excl</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.1</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 10.0 to 10.1.</a></small><br><a href="http://www.franz.com/support/documentation/10.0/doc/operators/excl/device-close.htm">10.0 version</a></td></tr></table><h2 id="2">device-close</h2>

<p id="3"><b>Arguments: </b><i>
stream abort 
</i></p>

<p id="4">
Called by <a href="../../../ansicl/dictentr/close.htm"><b>close</b></a> as its
implementation. An around method first clears the output-buffer of the
stream using either <a href="../../../ansicl/dictentr/finish-o.htm"><b>force-output</b></a> (if abort is <code>nil</code>) or <a href="../../../ansicl/dictentr/finish-o.htm"><b>clear-output</b></a> (if abort is t) The primary method
then actually breaks the connection with the device, and the around
method sets any external file or window handles or descriptors in the
stream object to <code>nil</code>, to ensure that they are
never used again due to this stream, and also marks the stream as
closed, so that CL data-movement stream functions such as <a href="../../../ansicl/dictentr/read-byt.htm"><b>read-byte</b></a>/<a href="../../../ansicl/dictentr/read-cha.htm"><b>read-char</b></a> and <a href="../../../ansicl/dictentr/write-by.htm"><b>write-byte</b></a>/<a href="../../../ansicl/dictentr/write-ch.htm"><b>write-char</b></a> cannot proceed on the now-closed
stream.
</p>

<p id="5">
<a href="device-close.htm"><b>device-close</b></a> must always
succeed (i.e. it must never return a failure code or call <a href="../../../ansicl/dictentr/error0.htm"><b>error</b></a>), and it cannot take excessive
time to perform its job. If it fails to break the connection within a
clock tick or some reasonably small time, it gives up and returns with
no further action. Leakage of file descriptor or window handles is
possible in this case.
</p>

<h3 id="6">Defined methods</h3>

<p id="7">
In addition to the described around method:
</p>
<ul>
<li id="8">
On class: <a href="../../classes/excl/simple-stream.htm"><code>simple-stream</code></a>:
returns <code>t</code>.
</li>

</ul>

<p id="9">
See <a href="../../streams.htm">streams.htm</a> for information on the
simple-streams implementation in Allegro CL. The older but still
supported Gray streams implementation is described in
<a href="../../gray-streams.htm">gray-streams.htm</a>.
</p>

<hr><p id="10"><small>Copyright (c) 1998-2017, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br>
<small>This page was not revised from the 10.0 page.</small><br><small>Created 2017.2.15.</small><br>
</p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faq/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 10.1</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 10.0 to 10.1.</a></small><br><a href="http://www.franz.com/support/documentation/10.0/doc/operators/excl/device-close.htm">10.0 version</a></td></tr></table></body></html>